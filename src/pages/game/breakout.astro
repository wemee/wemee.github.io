---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Navbar from '@/components/Navbar.astro';
import '@/styles/game-common.css';
---
<BaseLayout 
  title="æ‰“ç£šå¡Š | æŒ«å±å‹‡çš„éŠæˆ²é–“" 
  description="ç¶“å…¸å¾©å¤çš„æ‰“ç£šå¡ŠéŠæˆ²ï¼ŒæŒ‘æˆ°åæ‡‰ç¥ç¶“ï¼å…§å«è¶…å¼· AI è‡ªå‹•éŠç©æ¨¡å¼ (AI æ¨¡å¼)ï¼Œä¾†çœ‹çœ‹æ¼”ç®—æ³•æ˜¯æ€éº¼éé—œçš„ã€‚"
>
  <Navbar currentPage="game" />
  <div class="container-fluid mt-3">
    <div class="row justify-content-center">
      <div class="col-auto">
        <div class="game-container">
          <canvas id="gameCanvas" width="480" height="600"></canvas>
          <div class="game-overlay" id="startScreen">
            <h2>ğŸ§± æ‰“ç£šå¡Š</h2>
            <p>æ‰“ç ´æ‰€æœ‰ç£šå¡Šï¼</p>
            <button class="btn btn-lg btn-primary" id="startBtn">é–‹å§‹éŠæˆ²</button>
            <button class="btn btn-lg btn-warning mt-2" id="aiStartBtn">ğŸ¤– AI æ¨¡å¼</button>
            <div class="controls-info mt-3">
              <small>â† â†’ æˆ– æ»‘é¼ ç§»å‹•æ¿å­<br>ç©ºç™½éµæˆ–é»æ“Šç™¼çƒ</small>
            </div>
          </div>
          <div class="game-overlay hidden" id="winScreen">
            <h2>ğŸ‰ æ­å–œéé—œï¼</h2>
            <p>åˆ†æ•¸: <span id="winScore">0</span></p>
            <button class="btn btn-lg btn-success" id="nextLevelBtn">ä¸‹ä¸€é—œ</button>
          </div>
          <div class="game-overlay hidden" id="gameOverScreen">
            <h2>ğŸ’€ éŠæˆ²çµæŸ</h2>
            <p>æœ€çµ‚åˆ†æ•¸: <span id="finalScore">0</span></p>
            <button class="btn btn-lg btn-primary" id="restartBtn">å†ç©ä¸€æ¬¡</button>
          </div>
          <div class="game-hud">
            <span class="hud-item">åˆ†æ•¸: <span id="scoreDisplay">0</span></span>
            <span class="hud-item"><span id="aiIndicator" class="hidden">ğŸ¤– AI</span> ç”Ÿå‘½: <span id="livesDisplay">â¤ï¸â¤ï¸â¤ï¸</span></span>
            <span class="hud-item">é—œå¡: <span id="levelDisplay">1</span></span>
          </div>
        </div>
        <div class="text-center mt-3">
          <a href="/game/" class="btn btn-outline-secondary">â† è¿”å›éŠæˆ²åˆ—è¡¨</a>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<script>
  import { BreakoutGame } from '@/lib/games/BreakoutGame';
  
  // å•Ÿå‹•éŠæˆ²
  new BreakoutGame();
</script>
