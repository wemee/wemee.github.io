---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Navbar from '@/components/Navbar.astro';
import '@/styles/game-common.css';
---
<BaseLayout 
  title="ä¸‹æ¨“æ¢¯éŠæˆ² | æŒ«å±å‹‡çš„éŠæˆ²é–“" 
  description="ç¶“å…¸åæ‡‰éŠæˆ²ã€Œä¸‹æ¨“æ¢¯ã€ï¼ŒæŒ‘æˆ°ä½ çš„åæ‡‰æ¥µé™ï¼æ˜¯ç”·äººå°±ä¸‹ 100 å±¤ã€‚æ”¯æ´è§¸æ§ã€éµç›¤èˆ‡ AI è‡ªå‹•éŠç©æ¨¡å¼ã€‚"
>
  <Navbar currentPage="game" />
  <div class="container-fluid mt-3">
    <div class="row justify-content-center">
      <div class="col-auto">
        <div class="game-container">
          <canvas id="gameCanvas" width="400" height="600"></canvas>
          <div class="game-overlay" id="startScreen">
            <h2>ğŸƒ ä¸‹æ¨“æ¢¯</h2>
            <p>ä¸è¦æ‰å‡ºå»ï¼Œä¹Ÿåˆ¥è¢«é ‚åˆ°é ‚éƒ¨ï¼</p>
            <button class="btn btn-lg btn-success" id="startBtn">é–‹å§‹éŠæˆ²</button>
            <button class="btn btn-lg btn-warning mt-2" id="aiStartBtn">ğŸ¤– AI æ¨¡å¼</button>
            <div class="controls-info mt-3">
              <small>â† â†’ æˆ– A D ç§»å‹• | ç©ºç™½éµæš«åœ</small>
            </div>
          </div>
          <div class="game-overlay hidden" id="gameOverScreen">
            <h2>ğŸ’€ éŠæˆ²çµæŸ</h2>
            <p>åˆ†æ•¸: <span id="finalScore">0</span></p>
            <p>æœ€é«˜åˆ†: <span id="highScore">0</span></p>
            <button class="btn btn-lg btn-primary" id="restartBtn">å†ç©ä¸€æ¬¡</button>
          </div>
          <div class="game-overlay hidden" id="pauseScreen">
            <h2>â¸ï¸ æš«åœ</h2>
            <p>æŒ‰ç©ºç™½éµç¹¼çºŒ</p>
          </div>
          <div class="score-display">
            <span id="aiIndicator" class="hidden">ğŸ¤– </span>
            <span id="scoreDisplay">0</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<script>
  import { StairsGame } from '@/lib/games/StairsGame';
  
  // å•Ÿå‹•éŠæˆ²
  new StairsGame();
</script>
